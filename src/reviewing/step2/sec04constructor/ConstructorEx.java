package reviewing.step2.sec04constructor;

/**
 * Java의 생성자(Constructor)와 this 키워드 심화 정리
 * - 생성자의 역할, 규칙, 장점(제약)
 * - this(참조 변수)와 this()(생성자 호출)의 차이
 */
public class ConstructorEx {

    public static void main(String[] args) {

        /**
         * 1. 생성자(Constructor)란?
         * - 객체가 생성(`new`)되는 그 순간에 딱 한 번 호출되는 '특별한 메서드'.
         * - 용도: 객체 생성과 동시에 멤버 변수를 원하는 값으로 초기화하는 역할.
         *
         * 필수 규칙
         * 1. 이름이 클래스 이름과 똑같아야 한다. (대소문자 포함)
         * 2. 리턴 타입(반환형)이 아예 없다. (void조차 안 씀)
         */

        /**
         * 2. 생성자 호출 시점 (라이프사이클)
         * - 코드: `new MemberConstructor("user1", 15, 90);`
         * - 순서:
         *   1) 메모리(Heap) 할당 (객체 생성)
         *   2) 멤버 변수들이 기본값(0, null, false)으로 초기화
         *   3) 생성자 블록 내부 코드 실행 -> 개발자가 원하는 값으로 덮어씌움
         */

        /**
         * 3. 생성자의 장점 (왜 쓰나?)
         * - 과거: 객체 생성 후 `initMember()` 같은 메서드를 실수로 안 부르면, 깡통 객체가 되어버림.
         * - 현재(생성자): "이 값을 안 넣으면 객체를 못 만든다"고 '제약(Constraint)'을 걸어버림.
         *   -> 필수 데이터 누락 방지 (컴파일 에러로 바로 잡아냄).
         *   -> 생성과 초기화를 한 번에 해결 (코드 중복 제거).
         */

        /**
         * 4. 기본 생성자 (Default Constructor)
         * - 매개변수가 하나도 없는 생성자 (`MemberConstructor() {}`)
         * - 규칙: 클래스에 생성자가 '하나도' 없으면 자바가 자동으로 만들어줌.
         * - 주의: 개발자가 생성자를 '하나라도' 직접 만들면, 자동 생성 기능은 사라짐.
         *   -> 직접 만든 생성자가 있는데 기본 생성자도 쓰고 싶다면? 직접 코드로 적어줘야 함.
         */

        /**
         * 5. this 키워드 (참조 변수)
         * - 의미: "인스턴스(객체) 자기 자신"을 가리키는 참조값.
         * - 용도: 멤버 변수와 매개변수(Parameter)의 이름이 같을 때, 둘을 구분하기 위해 사용.
         *   (e.g., `this.name = name;` -> "내 멤버변수 name에 매개변수 name을 넣어라")
         * - 원리: 변수 이름이 겹치면 '가까운 쪽(스코프)'인 지역변수(매개변수)가 우선순위를 가짐.
         *        그래서 `this`를 붙여서 "이건 지역변수가 아니라 멤버변수야"라고 명시하는 것.
         */

        /**
         * 6. this() (생성자 호출)
         * - 의미: 생성자 내부에서 '자기 자신의 다른 생성자'를 호출하는 기능.
         * - 핵심 용도: 생성자 오버로딩 시 발생하는 코드 중복 제거 (생성자 체이닝)
         *   -> 매개변수 2개짜리 생성자가 매개변수 3개짜리 생성자를 호출해서 초기화 로직을 재사용함.
         *
         * - 제약: 반드시 생성자 코드의 '첫 번째 줄'에 있어야 함.
         *   [Why?] 생성자는 객체를 '초기화'하는 게 목적임.
         *          다른 생성자에게 초기화를 맡겨놓고(`this()`), 그 전에 내가 뭘 건드리면(다른 코드 실행),
         *          초기화가 꼬이거나 덮어씌워질 위험이 있음. 그래서 첫 줄에 호출하도록 강제함.
         */

        MemberConstructor member1 = new MemberConstructor("user1", 15, 90);
        MemberConstructor member2 = new MemberConstructor("user2", 16);

        MemberConstructor[] members = {member1, member2};

        for (MemberConstructor m : members) {
            System.out.println("이름: " + m.name + ", 나이: " + m.age + ", 성적: " + m.grade);
        }
    }
}
